From a3cc2b4a60cf1c4c259bf1df0f596ee4fd4b6f2d Mon Sep 17 00:00:00 2001
From: Yuri Khan <yurivkhan@gmail.com>
Date: Wed, 5 Dec 2018 00:47:11 +0700
Subject: [PATCH] wip: Draw tab index

---
 kitty/tab_bar.py | 6 ++++--
 kitty/tabs.py    | 4 ++--
 2 files changed, 6 insertions(+), 4 deletions(-)

Index: kitty/kitty/tab_bar.py
===================================================================
--- kitty.orig/kitty/tab_bar.py	2019-01-12 19:47:21.937003059 +0700
+++ kitty/kitty/tab_bar.py	2019-01-12 19:47:51.264245613 +0700
@@ -15,7 +15,7 @@
 from .window import calculate_gl_geometry
 from .rgb import alpha_blend, color_from_int
 
-TabBarData = namedtuple('TabBarData', 'title is_active needs_attention')
+TabBarData = namedtuple('TabBarData', 'title is_active needs_attention index')
 DrawData = namedtuple(
     'DrawData', 'leading_spaces sep trailing_spaces bell_on_tab'
     ' bell_fg alpha active_bg inactive_bg default_bg title_template')
@@ -38,7 +38,9 @@
             draw_title.template_failure_reported = True
             log_error('Invalid tab title template: "{}" with error: {}'.format(draw_data.title_template, e))
         title = tab.title
-    screen.draw(title)
+    screen.draw('{index} {title}'.format(
+        index=tab.index,
+        title=tab.title))
 
 
 def draw_tab_with_separator(draw_data, screen, tab, before, max_title_length, index):
Index: kitty/kitty/tabs.py
===================================================================
--- kitty.orig/kitty/tabs.py	2019-01-12 19:47:21.937003059 +0700
+++ kitty/kitty/tabs.py	2019-01-12 19:47:21.937003059 +0700
@@ -553,14 +553,14 @@
     def tab_bar_data(self):
         at = self.active_tab
         ans = []
-        for t in self.tabs:
+        for i, t in enumerate(self.tabs, start=1):
             title = (t.name or t.title or appname).strip()
             needs_attention = False
             for w in t:
                 if w.needs_attention:
                     needs_attention = True
                     break
-            ans.append(TabBarData(title, t is at, needs_attention))
+            ans.append(TabBarData(title, t is at, needs_attention, i))
         return ans
 
     def activate_tab_at(self, x):
